# Ex22 vs Ex22b å¿«é€Ÿå¯¹æ¯”æŒ‡å—

## ğŸ“Š ä»£ç è§„æ¨¡å¯¹æ¯”

```
Ex22:     702 è¡Œä»£ç  (ç®€æ´å®ç°)
Ex22b:   1008 è¡Œä»£ç  (é«˜çº§ç‰¹æ€§)
å¢åŠ :     +43% ä»£ç é‡
```

---

## ğŸ¯ æ ¸å¿ƒå·®å¼‚é€ŸæŸ¥è¡¨

| ç‰¹æ€§ | Ex22 | Ex22b-v1 | Ex22b-v2 |
|------|------|----------|----------|
| **Namespace** | âŒ æ—  | âœ… `namespace Set` | âœ… `namespace Set` |
| **Singletonæ¨¡å¼** | âŒ | âœ… `getInstance()` | âœ… `getInstance()` |
| **è¿­ä»£å™¨** | âŒ | âœ… 4ç§è¿­ä»£å™¨ | âœ… 4ç§è¿­ä»£å™¨ |
| **Range-for** | âŒ | âœ… æ”¯æŒ | âœ… æ”¯æŒ |
| **Carteè®¿é—®æ§åˆ¶** | ğŸŸ¡ publicæ„é€  | ğŸŸ¡ publicæ„é€  | âœ… privateæ„é€  |
| **å¼‚å¸¸åŸºç±»** | `std::runtime_error` | è‡ªå®šä¹‰ | è‡ªå®šä¹‰ |
| **ä»£ç è¡Œæ•°** | 702è¡Œ | ~450è¡Œ | ~558è¡Œ |
| **å¤æ‚åº¦** | â­â­ ç®€å• | â­â­â­â­ ä¸­ç­‰ | â­â­â­â­â­ å¤æ‚ |

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡å¯¹æ¯”

### Ex22 æ¶æ„ - ç®€æ´ç›´æ¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Controleur (æ¸¸æˆæ§åˆ¶å™¨)      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Jeu    â”‚  â”‚    Pioche*      â”‚  â”‚
â”‚  â”‚ owns 81  â”‚  â”‚ (åŠ¨æ€åˆ†é…)       â”‚  â”‚
â”‚  â”‚  Carte   â”‚  â”‚ refs Carte*     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â–²                â–²             â”‚
â”‚       â”‚                â”‚             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚      Plateau              â”‚      â”‚
â”‚  â”‚      refs Carte*          â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç‰¹ç‚¹:
âœ“ ç›´æ¥åˆ›å»º Jeu å®ä¾‹
âœ“ ç®€å•çš„ç»„åˆå…³ç³»
âœ“ å®¹æ˜“ç†è§£å’Œä¿®æ”¹
```

### Ex22b æ¶æ„ - å•ä¾‹+è¿­ä»£å™¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Controleur (æ¸¸æˆæ§åˆ¶å™¨)         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚   Jeu& ref to Singleton        â”‚    â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚   â”‚   â”‚ 81ä¸ª Carte (ç§æœ‰æ„é€ )  â”‚   â”‚    â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚   â”‚                                â”‚    â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚   â”‚   â”‚  Iterator            â”‚    â”‚    â”‚
â”‚   â”‚   â”‚  const_iterator      â”‚    â”‚    â”‚
â”‚   â”‚   â”‚  IteratorForme       â”‚    â”‚    â”‚
â”‚   â”‚   â”‚  IteratorBis         â”‚    â”‚    â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚ Plateau  â”‚    â”‚   Pioche*    â”‚      â”‚
â”‚   â”‚ (æ·±æ‹·è´)  â”‚    â”‚ (åŠ¨æ€åˆ†é…)    â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç‰¹ç‚¹:
âœ“ Singletonç¡®ä¿å”¯ä¸€å®ä¾‹
âœ“ å¤šç§è¿­ä»£æ¨¡å¼
âœ“ å¼ºåˆ¶è®¿é—®æ§åˆ¶ (v2)
âœ“ æ”¯æŒæ ‡å‡†åº“é£æ ¼è¿­ä»£
```

---

## ğŸ’¡ å…³é”®ä»£ç ç‰‡æ®µå¯¹æ¯”

### 1. Jeu ç±»å®ä¾‹åŒ–

```cpp
// Ex22 - æ™®é€šç±»
Jeu jeu;  // å¯ä»¥åˆ›å»ºå¤šä¸ªå®ä¾‹

// Ex22b - Singleton
Jeu& jeu = Jeu::getInstance();  // å…¨å±€å”¯ä¸€
```

### 2. éå†æ‰€æœ‰å¡ç‰‡

```cpp
// Ex22 - ç´¢å¼•è®¿é—®
for (size_t i = 0; i < jeu.getNbCartes(); i++) {
    const Carte& c = jeu.getCarte(i);
    std::cout << c << std::endl;
}

// Ex22b - Range-based for
for (auto& c : jeu) {
    cout << c << "\n";
}

// Ex22b - è‡ªå®šä¹‰è¿­ä»£å™¨
Jeu::Iterator it = jeu.first();
while (!it.isDone()) {
    cout << it.currentItem();
    it.next();
}
```

### 3. åˆ›å»ºå¡ç‰‡

```cpp
// Ex22 - ä»»ä½•åœ°æ–¹éƒ½èƒ½åˆ›å»º
Carte c1(Couleur::rouge, Nombre::deux, 
         Forme::ovale, Remplissage::plein);

// Ex22b v1 - åŒæ ·å¯ä»¥åˆ›å»º
Carte c2(Couleur::vert, Nombre::un,
         Forme::vague, Remplissage::vide);

// Ex22b v2 - ç¼–è¯‘é”™è¯¯ï¼
// Carte c3(...);  // âŒ æ„é€ å‡½æ•°æ˜¯private
// åªèƒ½é€šè¿‡ Jeu::getInstance().getCarte(i) è·å–
```

### 4. æŒ‰æ¡ä»¶è¿‡æ»¤

```cpp
// Ex22 - æ‰‹åŠ¨è¿‡æ»¤
for (size_t i = 0; i < jeu.getNbCartes(); i++) {
    if (jeu.getCarte(i).getForme() == Forme::ovale) {
        // å¤„ç†æ¤­åœ†å½¢å¡ç‰‡
    }
}

// Ex22b - ä¸“ç”¨è¿­ä»£å™¨
Jeu::IteratorForme it = jeu.first(Forme::ovale);
while (!it.isDone()) {
    cout << it.currentItem();  // åªè¾“å‡ºæ¤­åœ†å½¢å¡ç‰‡
    it.next();
}
```

---

## ğŸ“ å­¦ä¹ è·¯å¾„æ¨è

### é˜¶æ®µ1: åŸºç¡€æŒæ¡ (Ex22)
```
1ï¸âƒ£ ç†è§£å››ç§å…³è”å…³ç³»
   - å…³è” (Association)
   - èšåˆ (Aggregation)  
   - ç»„åˆ (Composition)
   - ä¾èµ– (Dependency)

2ï¸âƒ£ æŒæ¡å†…å­˜ç®¡ç†
   - æ„é€ å‡½æ•°/ææ„å‡½æ•°
   - æ‹·è´æ„é€ /èµ‹å€¼è¿ç®—ç¬¦
   - deleteç¦ç”¨è¯­æ³•

3ï¸âƒ£ å®ç° SET åˆ¤æ–­ç®—æ³•
   - æšä¸¾ç±»å‹æ¯”è¾ƒ
   - é€»è¾‘æ¡ä»¶ç»„åˆ
```

### é˜¶æ®µ2: è®¾è®¡æ¨¡å¼ (Ex22b)
```
1ï¸âƒ£ Singleton æ¨¡å¼
   - ä¸ºä»€ä¹ˆéœ€è¦å•ä¾‹ï¼Ÿ
   - å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨ï¼Ÿ
   - ä¼˜ç¼ºç‚¹åˆ†æ

2ï¸âƒ£ Iterator æ¨¡å¼
   - å†…éƒ¨è¿­ä»£å™¨ vs å¤–éƒ¨è¿­ä»£å™¨
   - æ ‡å‡†åº“é£æ ¼å®ç°
   - æ¡ä»¶è¿‡æ»¤è¿­ä»£å™¨

3ï¸âƒ£ å¼ºåˆ¶è®¿é—®æ§åˆ¶
   - friend å…³é”®å­—ä½¿ç”¨
   - ç§æœ‰æ„é€ å‡½æ•°æ¨¡å¼
   - å·¥å‚æ¨¡å¼æ€æƒ³
```

---

## ğŸ” å®é™…æµ‹è¯•å¯¹æ¯”

### Ex22 æµ‹è¯•è¾“å‡º (å®é™…è¿è¡Œç»“æœ)

```
=== Test de la classe Carte ===
Carte 1: [rouge, 2, ovale, plein]
Carte 2: [vert, 1, vague, vide]

=== Test de la classe Combinaison ===
Combinaison:
  1: [rouge, 1, ovale, plein]
  2: [vert, 2, vague, vide]
  3: [violet, 3, losange, hachure]
  Est un SET: OUI  âœ… æ‰€æœ‰ç‰¹å¾éƒ½ä¸åŒ

Combinaison:
  1: [rouge, 1, ovale, plein]
  2: [rouge, 2, vague, vide]
  3: [vert, 3, losange, hachure]
  Est un SET: NON  âŒ é¢œè‰²éƒ¨åˆ†ç›¸åŒéƒ¨åˆ†ä¸åŒ
```

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯å»ºè®®

### é€‰æ‹© Ex22 å½“ä½ éœ€è¦:

âœ… å¿«é€Ÿå®ç°åŠŸèƒ½åŸå‹  
âœ… å­¦ä¹ é¢å‘å¯¹è±¡åŸºç¡€  
âœ… æ•™å­¦æ¼”ç¤ºä»£ç   
âœ… å°å‹ä¸ªäººé¡¹ç›®  
âœ… æ¸…æ™°æ˜“æ‡‚çš„ä»£ç ç»“æ„  

### é€‰æ‹© Ex22b å½“ä½ éœ€è¦:

âœ… ä¼ä¸šçº§ä»£ç è§„èŒƒ  
âœ… å­¦ä¹ è®¾è®¡æ¨¡å¼  
âœ… å¯æ‰©å±•çš„æ¶æ„  
âœ… å¤šäººåä½œé¡¹ç›®  
âœ… å‡†å¤‡æŠ€æœ¯é¢è¯•  

---

## ğŸš€ è¿›é˜¶ç»ƒä¹ å»ºè®®

åŸºäº Ex22ï¼Œä½ å¯ä»¥å°è¯•:

1. **æ·»åŠ åŸºç¡€è¿­ä»£å™¨**
   ```cpp
   class Jeu {
   public:
       class Iterator {
           // å®ç°åŸºç¡€éå†
       };
   };
   ```

2. **å®ç°è‡ªåŠ¨æ‰¾SETç®—æ³•**
   ```cpp
   bool Plateau::findSet(Combinaison& result);
   ```

3. **æ·»åŠ æ¸¸æˆç»Ÿè®¡**
   ```cpp
   class GameStats {
       int setsFound;
       int cardsRemaining;
   };
   ```

4. **å®ç°ä¿å­˜/åŠ è½½åŠŸèƒ½**
   ```cpp
   void saveGame(const string& filename);
   void loadGame(const string& filename);
   ```

---

## ğŸ“š å…³é”®æ¦‚å¿µæ€»ç»“

### ç»„åˆ vs èšåˆ

```cpp
// ç»„åˆ (Composition) - ç”Ÿå‘½å‘¨æœŸä¾èµ–
class Jeu {
    const Carte* cartes[81];  // Jeuåˆ›å»ºå’Œé”€æ¯Carte
    ~Jeu() {
        for(auto* c : cartes) delete c;  // å¿…é¡»æ¸…ç†
    }
};

// èšåˆ (Aggregation) - ç”Ÿå‘½å‘¨æœŸç‹¬ç«‹  
class Pioche {
    const Carte** cartes;  // Piocheåªå¼•ç”¨Carte
    ~Pioche() {
        delete[] cartes;  // åªæ¸…ç†æŒ‡é’ˆæ•°ç»„
        // ä¸åˆ é™¤Carteæœ¬èº«ï¼
    }
};
```

### explicit å…³é”®å­—

```cpp
// Ex22
explicit Pioche(const Jeu& j);  // é˜²æ­¢éšå¼è½¬æ¢

// è¿™æ ·ä¼šæŠ¥é”™:
Pioche p = jeu;  // âŒ é”™è¯¯

// å¿…é¡»æ˜¾å¼è°ƒç”¨:
Pioche p(jeu);   // âœ… æ­£ç¡®
```

---

## ğŸ‰ æ€»ç»“

ä¸¤ä¸ªå®ç°éƒ½å¾ˆä¼˜ç§€ï¼Œå„æœ‰ç‰¹è‰²ï¼š

- **Ex22** = å®Œç¾çš„å­¦ä¹ èµ·ç‚¹ï¼Œæ¸…æ™°å®ç”¨
- **Ex22b** = ä¸“ä¸šçš„è®¾è®¡å‚è€ƒï¼Œå€¼å¾—æ·±å…¥ç ”ç©¶

å»ºè®®: **å…ˆç²¾é€š Ex22ï¼Œå†ç ”ç©¶ Ex22b çš„é«˜çº§ç‰¹æ€§ï¼**

---

*ç”Ÿæˆæ—¶é—´: 2025-11-15*  
*åˆ†æå·¥å…·: GitHub Copilot*
